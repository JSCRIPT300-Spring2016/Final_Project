<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Color Match Game</title>
    <style type="text/css">
      .redText {
        text-shadow: 1px 1px 0px #000000;
        color: #f00;
      }
      .greenText {
        text-shadow: 1px 1px 0px #000000;
        color: #008000;
      }
      .blueText {
        text-shadow: 1px 1px 0px #000000;
        color: #0000FF;
      }
      .orangeText {
        text-shadow: 1px 1px 0px #000000;
        color: #FFA500;
      }
      #container  { padding:20px; border:2px solid #333; width:350px;}
      #list-template { display:none; }
      #box_0 { float: left; text-align: center; width: 60px; height: 60px; 
               padding: 15px; margin: 2px; border: 3px solid #000; }
      #box_1 { float: left; text-align: center; width: 60px; height: 60px; 
               padding: 15px; margin: 2px; border: 3px solid #000; }
      #box_2 { float: left; text-align: center; width: 60px; height: 60px; 
               padding: 15px; margin: 2px; border: 3px solid #000; }
      #box_3 { float: left; text-align: center; width: 60px; height: 60px; 
               padding: 15px; margin: 2px; border: 3px solid #000; }
     </style>
  </head>
<body>

<h1>Color Drop</h1>
<br>
<div id="container">
  <form name="playerform"><label for="key">Player Name: </label><br />
  <input id="key" name="key" type="text"/><br />
  <input id="save" type="button" value="Pick Colors!"/>
  <ul id='list'></ul>
</div>
<br><br>
<div id="box_0">
  <section class="startColor" id="0">Color 1</section>
</div>
<div id="box_1">
  <section class="startColor" id="1">Color 2</section>
</div>
<div id="box_2">
  <section class="startColor" id="2">Color 3</section>
</div>
<div id="box_3">
  <section class="startColor" id="3">Color 4</section>
</div>
<br><br><br><br><br>
<div class="colors">  
  <p draggable="true" id="Red" class="redText">Red</p>
  <p draggable="true" id="Blue" class="blueText">Blue</p>
  <p draggable="true" id="Green" class="greenText">Green</p>
  <p draggable="true" id="Orange" class="orangeText">Orange</p>
</div>

<div id="list-template">
<li><a href=""></a></li>
</div>
<br><br>
<div>    
<input id="playColors" type="button" value="Play!" disabled/>
</div>
     <!-- these script src values presume hosting the files locally -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.12.0/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>
    <script src="client.js"></script>
    <script src="main.js"></script>
	
	<script type="text/javascript">
     $(init);
     var play;
     var colorElements = [0, 0, 0, 0];

     function init() {
         document.getElementsByClassName('colors')[0].style.visibility = 'hidden';
         var saveButton = document.getElementById('save');
         saveButton.addEventListener('click', saveItem);
     }
     var Player = Backbone.Model.extend({
         initialize: function () {
             console.log('Player created');
         },
         asString: function () {
             return JSON.stringify(this.toJSON());
         }
     });
     var player = new Player({
         name: '',
         highScore: '',
         displayName: ''
     });

     var ColorGame = Backbone.Model.extend({
         initialize: function () {
             console.log("ColorGame Model initialized.");
             // this comes after the objects
         },
         asString: function () {
             return JSON.stringify(this.toJSON());
         }

     });
     var Games = Backbone.Collection.extend({
         initialize: function () {
             console.log("Play collection is initialized");
         },
         model: ColorGame,
         url: '/shuffle'
     });
     // DashBoard view
     var View = Backbone.View.extend({
         initialize: function () {
             console.log("Score View is initialized");
             this.template = $('#list-template').children();
             this.render();
         },
         el: '#container',
         render: function () {
             console.log("In render" + this.model);
             this.listenTo(this.model, 'change', function () {
                 console.log("Change detected");
                 var highScore = "High Score: " + this.model.at(1).attributes[10];
                 console.log("High Score " + highScore);
                 // var li = this.template.clone().find('highScore').text(data[i].text).end();
                 this.$el.find('ul').append(highScore);
                 //$('body').append(this.render().el);
             });
         }
     });
     var Box0View = Backbone.View.extend({
         initialize: function () {
             console.log("Box 0 View is initialized");
             this.render();
         },
         el: '#box_0',
         render: function () {
             this.listenTo(this.model, 'change', function () {
             console.log("BoxView Change detected");
             console.log("This model " + this.model.at(1).attributes[0])
		     var newColor = this.model.at(1).attributes[0];
		     newValue = '3px solid ' + newColor;

		     this.$el.css('border', newValue);
		     // var li = this.template.clone().find('highScore').text(data[i].text).end();
                 // this.$el.css('border', '3px solid orange');
                 //$('body').append(this.render().el);
 		     return this;
           });
         }
     });
         var Box1View = Backbone.View.extend({
         initialize: function () {
             console.log("Box 1 View is initialized");
             this.render();
         },
         el: '#box_1',
         render: function () {
             this.listenTo(this.model, 'change', function () {
             console.log("BoxView Change detected");
             console.log("This model " + this.model.at(1).attributes[1])
		     var newColor = this.model.at(1).attributes[1];
		     newValue = '3px solid ' + newColor;

		     this.$el.css('border', newValue);
 		     return this;
           });
         }
     });
              var Box2View = Backbone.View.extend({
         initialize: function () {
             console.log("Box 2 View is initialized");
             this.render();
         },
         el: '#box_2',
         render: function () {
             this.listenTo(this.model, 'change', function () {
             console.log("BoxView Change detected");
             console.log("This model " + this.model.at(1).attributes[2])
		     var newColor = this.model.at(1).attributes[2];
		     newValue = '3px solid ' + newColor;

		     this.$el.css('border', newValue);
		     // var li = this.template.clone().find('highScore').text(data[i].text).end();
                 // this.$el.css('border', '3px solid orange');
                 //$('body').append(this.render().el);
 		     return this;
           });
         }
     });
       var Box3View = Backbone.View.extend({
         initialize: function () {
             console.log("Box 3 View is initialized");
             this.render();
         },
         el: '#box_3',
         render: function () {
             this.listenTo(this.model, 'change', function () {
             console.log("BoxView Change detected");
             console.log("This model " + this.model.at(1).attributes[3])
		     var newColor = this.model.at(1).attributes[3];
		     newValue = '3px solid ' + newColor;

		     this.$el.css('border', newValue);
 		     return this;
           });
         }
     });
	</script>
<script>
    function setGameData() {
        
    }

</script>

<script>
    function submitColors() {
        play = new Games({});

        var view = new View({ model: play });
        var boxView = new Box0View({ model: play });
        var boxView = new Box1View({ model: play });
        var boxView = new Box2View({ model: play });
        var boxView = new Box3View({ model: play });

        var curGame = play.create(player.attributes);
        console.log(curGame);
    }
</script> 
</body>
</html>
